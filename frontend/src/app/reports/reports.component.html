<div class="main">

    <img (click) = "section=1" src="../../assets/back.png" *ngIf="section==2" class="back">

    <div class="top">
        <div class="title" *ngIf="section==1">
            <h1>Reports Dashboard</h1>
            <hr id="line" style="width: 420px;">
        </div>

        <div class="title" *ngIf="section==2">
            <h1>{{action==='add'?'Add Report' : 'Edit Report'}}</h1>
            <hr id="line" style="width: 270px;">
        </div>

        <div *ngIf="section==1 && role=='Officer'" class="add-drive" (click)="section=2">
            <span class="material-symbols-outlined">
                add_box
            </span>
            <p>Add Report</p>
        </div>
    </div>
    
    <div class="filter-box" *ngIf="section==1">
        <div class="container">
            <div class="status-filter">
                <a style="text-decoration: none;">
                    <div class="status" [ngClass]="{'active-chip' : filter=='All', 'not-active-chip':filter!='All'}">
                        <span class="material-symbols-outlined">
                            done
                        </span>
                        <p>All</p>
                    </div>
                </a>
                
    
                <a style="text-decoration: none;">
                    <div class="status" [ngClass]="{'active-chip' : filter=='Today', 'not-active-chip':filter!='Today'}">
                        <span class="material-symbols-outlined">
                            done
                        </span>
                        <p>Today</p>
                    </div>
                </a>
                
                <a style="text-decoration: none;">
                    <div class="status" [ngClass]="{'active-chip' : filter=='Upcoming', 'not-active-chip':filter!='Upcoming'}">
                        <span class="material-symbols-outlined">
                            done
                        </span>
                        <p>Upcoming</p>    
                    </div>
                </a>
    
                <a style="text-decoration: none;">
                    <div class="status" [ngClass]="{'active-chip' : filter=='Completed', 'not-active-chip':filter!='Completed'}">
                        <span class="material-symbols-outlined">
                            done
                        </span>
                        <p>Completed</p>    
                    </div>
                </a>
            </div>
            <a>
                <span matTooltip="Refresh" class="material-symbols-outlined" id="refresh">
                    refresh
                </span>
            </a>
            
        </div>
        

        <div class="date-filter" *ngIf="filter == 'All' || filter == 'Completed'">
            
            <mat-form-field>
                <mat-label>Filter By Date Range</mat-label>
                
                <mat-date-range-input [rangePicker]="picker">
                  <input matStartDate placeholder="Start date" [(ngModel)]="startDate">
                  <input matEndDate placeholder="End date" [(ngModel)]="endDate">
                </mat-date-range-input>

                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-date-range-picker #picker></mat-date-range-picker>
            </mat-form-field>
            <button mat-raised-button>Apply</button>
        </div>
    </div>


    <div class="add-report-box" *ngIf="section==2" [ngStyle]="visibility==='Private'? {'background-color' : '#35363a'} : {}">
        <!-- [formGroup]="loginForm" (ngSubmit)="proceedLogin()" -->

        <mat-slide-toggle class="vis-toggle" color="accent"
        (click) = "visibility= visibility==='Public'?'Private' : 'Public'"
        [ngStyle]="visibility==='Private'? {'background-color' : 'white'} : {'background-color' : '#35363a'}">
        
            <div class="toggle-txt" [ngStyle]="visibility==='Private'? {'color' : '#35363a'} : {'color' : 'white'}">
                <span class="material-symbols-outlined" *ngIf="visibility==='Public'">
                    lock_open
                </span>
    
                <span class="material-symbols-outlined" *ngIf="visibility==='Private'">
                    lock
                </span>
    
                <p> {{visibility}} </p>
            </div>
            
        </mat-slide-toggle>

        <form [formGroup]="addReportForm" *ngIf="section==2" [ngStyle]="visibility==='Private'? {'color' : 'white'} : {}">

            <!-- <div class="input">
                <p>Visibility</p>
                <mat-form-field>
                    <mat-label>Visibility</mat-label>
                    <mat-slide-toggle formControlName = 'visibility'>Slide me!</mat-slide-toggle>
                </mat-form-field> 
            </div> -->

            <div class="section">
                <div class="input">
                    <p>Company</p>
                    <mat-form-field class="input">
                        <mat-label>e.g. AutoDesk</mat-label>
                        <input matInput formControlName = "company">
                    </mat-form-field>
                </div>

                <div class="input">
                    <p>Contact Mode</p>
                    <mat-form-field>
                        <mat-label>e.g. Mail</mat-label>
                        <input matInput formControlName = "mode">
                    </mat-form-field>
                </div>

            </div>
            
            <div class="section">
                <div class="input">
                    <p>Date</p>
                    <mat-form-field>
                        <mat-label>Choose a date</mat-label>
                        <input matInput [matDatepicker]="picker_1" formControlName = "date">
                        <mat-datepicker-toggle matIconSuffix [for]="picker_1"></mat-datepicker-toggle>
                        <mat-datepicker #picker_1></mat-datepicker>
                      </mat-form-field>
                </div> 

                <div class="input">
                    <div class="reminder-toggle">
                      <p>Reminder</p>
                      <mat-slide-toggle [(ngModel)]="reminder" [ngModelOptions]="{standalone: true}" name="reminderToggle"></mat-slide-toggle>
                    </div>
                    <mat-form-field>
                      <mat-label>Choose a date</mat-label>
                      <input matInput [matDatepicker]="picker_2" [disabled]='!reminder' 
                      [(ngModel)]="reminder_date" [ngModelOptions]="{standalone: true}">
                  
                      <mat-datepicker-toggle matIconSuffix [for]="picker_2"></mat-datepicker-toggle>
                      <mat-datepicker #picker_2></mat-datepicker>
                    </mat-form-field>
                </div>
                  
            </div>
             

            <!-- <div class="input">
                <p>Company Website</p>
                <mat-form-field>
                    <mat-label>https://www.autodesk.com/careers</mat-label>
                    <input type="url" matInput formControlName = "website">
                </mat-form-field>
            </div> -->
            

            <div class="section">
                <div class="input">
                    <p>HR Name</p>
                    <mat-form-field>
                        <mat-label>e.g. Tom H</mat-label>
                        <input matInput formControlName = "hr_name">
                    </mat-form-field> 
                </div>
    
                <div class="input">
                    <p>HR Mail</p>
                    <mat-form-field>
                        <mat-label>e.g. TomH@amazon.com*</mat-label>
                        <input matInput formControlName = "hr_mail">
                    </mat-form-field> 
                </div>
            </div>
            

            <div class="input">
                <p>Message</p>
                <mat-form-field>
                    <mat-label>Write Your Message Here</mat-label>
                    <textarea matInput formControlName="message"></textarea>
                </mat-form-field> 
            </div>
                         

            <div class="btns">
              <button mat-raised-button id="reset" (click)="resetForm()">Reset</button>
              <button mat-raised-button id="add" (click)="action==='add'?addReport() : editReport()">{{action==='add'?'Add Report' : 'Save Changes'}}</button>
            </div>
          
        </form>

    </div>


</div>