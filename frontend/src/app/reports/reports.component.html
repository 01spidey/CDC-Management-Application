<div class="main" *ngIf="section==1">

    <div class="top">
        <div class="title">
            <h1>My Reports</h1>
        </div>
    </div>

    <div class="filter-box">
        <div class="batch-filter">
            <mat-form-field>
                <mat-label>Batch</mat-label>
                <mat-select [ngModel] = 'batch' (ngModelChange)="onBatchChange($event)">
                  <mat-option *ngFor="let batch of batch_lst" [value]="batch">{{batch-4}}&nbsp;-&nbsp;{{batch}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <!-- <div class="batch-filter">
            <mat-form-field>
                <mat-label>Month</mat-label>
                <mat-select [ngModel] = 'sel_month' (ngModelChange)="onMonthChange($event)">
                  <mat-option *ngFor="let month of months" [value]="month">{{month}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div> -->

        
        <!-- <a>
            <span matTooltip="Refresh" class="material-symbols-outlined" id="refresh" (click)="changeFilter(status_filter,job_type_filter)">
                refresh
            </span>
        </a> -->
            
    </div>

    <div class="main-container">
        <div class="report-box">
            <div class="top-box">
                <h2>Overall Placement Report</h2>
                <!-- <div class="btn">
                    <span class="material-icons">download</span>
                    <p color="primary" > Download </p>
                </div> -->
            </div>

            <div class="table">
                <table>
                    <tr>
                        <th rowspan="2">S.No</th>
                        <th rowspan="2">Department</th>
                        <th rowspan="2">Total Strength</th>
                        <th rowspan="2">Placement Interested</th>
                        <th rowspan="2">Placed Students</th>
                        <th rowspan="2">Remaining</th>
                        <th colspan="9">CTC</th>
                        <th rowspan="2">Total %</th>
                    </tr>
                    
                    <tr>
                        <th>>=20LPA</th>
                        <th>>=15LPA</th>
                        <th>>=10LPA</th>
                        <th>>=8LPA</th>
                        <th>>=7LPA</th>
                        <th>>=6LPA</th>
                        <th>>=5LPA</th>
                        <th>>=4LPA</th>
                        <th>&lt;4L</th>
                    </tr>
                    
                    <tr *ngFor="let dept of DeptWiseReportData">
                        <td>{{dept.pos}}</td>
                        <td>{{dept.dept}}</td>
                        <td>{{dept.total}}</td>
                        <td>{{dept.interested}}</td>
                        <td>{{dept.placed}}</td>
                        <td>{{dept.remaining}}</td>
                        <td>{{dept.ctc.gt20}}</td>
                        <td>{{dept.ctc.gt15}}</td>
                        <td>{{dept.ctc.gt10}}</td>
                        <td>{{dept.ctc.gt8}}</td>
                        <td>{{dept.ctc.gt7}}</td>
                        <td>{{dept.ctc.gt6}}</td>
                        <td>{{dept.ctc.gt5}}</td>
                        <td>{{dept.ctc.gt4}}</td>
                        <td>{{dept.ctc.lt4}}</td>
                        <td>{{dept.total_percent}}%</td>
                    </tr>

                    <tr class="btm-row">
                        <td colspan="2">Total</td>
                        <td>{{deptWiseReportDataTotal.total}}</td>
                        <td>{{deptWiseReportDataTotal.interested}}</td>
                        <td>{{deptWiseReportDataTotal.placed}}</td>
                        <td>{{deptWiseReportDataTotal.remaining}}</td>
                        <td>{{deptWiseReportDataTotal.ctc.gt20}}</td>
                        <td>{{deptWiseReportDataTotal.ctc.gt15}}</td>
                        <td>{{deptWiseReportDataTotal.ctc.gt10}}</td>
                        <td>{{deptWiseReportDataTotal.ctc.gt8}}</td>
                        <td>{{deptWiseReportDataTotal.ctc.gt7}}</td>
                        <td>{{deptWiseReportDataTotal.ctc.gt6}}</td>
                        <td>{{deptWiseReportDataTotal.ctc.gt5}}</td>
                        <td>{{deptWiseReportDataTotal.ctc.gt4}}</td>
                        <td>{{deptWiseReportDataTotal.ctc.lt4}}</td>
                        <td>{{deptWiseReportDataTotal.total_percent}}%</td>
                    </tr>
                </table>
            </div>

        </div>

        <!-- <div class="report-box">
            <div class="top-box">
                <h2>Monthly Placement Report</h2>
                <div class="btn">
                    <span class="material-icons">download</span>
                    <p color="primary" > Download </p>
                </div>
            </div>

            <div class="month-box-all">
                <div class="month-box" *ngFor="let month of month_lst">
                    <p>{{month}}</p>
                </div>
            </div>

        </div> -->

        <div class="report-box">
            <div class="top-box">
                <h2>Visited Companies</h2>
                <!-- <div class="btn">
                    <span class="material-icons">download</span>
                    <p color="primary" > Download </p>
                </div> -->
            </div>
            <div class="company-table">
                <div class="search">
                    <span class="material-icons">search</span>
                    <input placeholder="Search For Companies" matInput (keyup)="applyFilter($event)" #input>
                </div>

                <table mat-table [dataSource]="VISITED_COMPANIES">
                    <ng-container matColumnDef="s.no">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan] = > S.no </th>
                        <td mat-cell *matCellDef="let item"> {{item.pos}} </td>
                        <td class="btm-row" mat-footer-cell *matFooterCellDef [attr.colspan]="6"> Total </td>
                    </ng-container>  
                    
                    <ng-container matColumnDef="company">
                        <th mat-header-cell *matHeaderCellDef> Company </th>
                        <td mat-cell *matCellDef="let item"> {{item.company}} </td>
                    </ng-container>  

                    <ng-container matColumnDef="category">
                        <th  mat-header-cell *matHeaderCellDef> Category </th>
                        <td mat-cell *matCellDef="let item"> {{item.category}} </td>
                    </ng-container>  

                    <ng-container matColumnDef="mode">
                        <th  mat-header-cell *matHeaderCellDef> Mode </th>
                        <td mat-cell *matCellDef="let item"> {{item.mode}} </td>
                    </ng-container>  
                    
                    <ng-container matColumnDef="ctc">
                        <th mat-header-cell *matHeaderCellDef> CTC(LPA) </th>
                        <td mat-cell *matCellDef="let item"> {{item.ctc}} </td>
                    </ng-container>  

                    <ng-container matColumnDef="drive date">
                        <th mat-header-cell *matHeaderCellDef> Drive Date </th>
                        <td mat-cell *matCellDef="let item"> {{item.drive_date}} </td>
                    </ng-container>  

                    <ng-container matColumnDef="ai-ds">
                        <th *matHeaderCellDef> AI-DS </th>
                        <td mat-cell *matCellDef="let item"> {{item.dept.ai_ds}} </td>
                        <td class="btm-row" mat-footer-cell *matFooterCellDef >{{totalOfferData.ai_ds}}</td>
                    </ng-container>  

                    <ng-container matColumnDef="cse">
                        <th *matHeaderCellDef> CSE </th>
                        <td mat-cell *matCellDef="let item"> {{item.dept.cse}} </td>
                        <td class="btm-row" mat-footer-cell *matFooterCellDef >{{totalOfferData.cse}}</td>
                    </ng-container>  

                    <ng-container matColumnDef="ece">
                        <th *matHeaderCellDef> ECE </th>
                        <td mat-cell *matCellDef="let item"> {{item.dept.ece}} </td>
                        <td class="btm-row" mat-footer-cell *matFooterCellDef >{{totalOfferData.ece}}</td>
                    </ng-container>  

                    <ng-container matColumnDef="eee">
                        <th *matHeaderCellDef> EEE </th>
                        <td mat-cell *matCellDef="let item"> {{item.dept.eee}} </td>
                        <td class="btm-row" mat-footer-cell *matFooterCellDef >{{totalOfferData.eee}}</td>
                    </ng-container>  

                    <ng-container matColumnDef="bme">
                        <th *matHeaderCellDef> BME </th>
                        <td mat-cell *matCellDef="let item"> {{item.dept.bme}} </td>
                        <td class="btm-row" mat-footer-cell *matFooterCellDef >{{totalOfferData.bme}}</td>
                    </ng-container>  

                    <ng-container matColumnDef="chem">
                        <th *matHeaderCellDef> CHEM </th>
                        <td mat-cell *matCellDef="let item"> {{item.dept.chem}} </td>
                        <td class="btm-row" mat-footer-cell *matFooterCellDef >{{totalOfferData.chem}}</td>
                    </ng-container>  

                    <ng-container matColumnDef="civil">
                        <th *matHeaderCellDef> CIVIL </th>
                        <td mat-cell *matCellDef="let item"> {{item.dept.civil}} </td>
                        <td class="btm-row" mat-footer-cell *matFooterCellDef >{{totalOfferData.civil}}</td>
                    </ng-container>  

                    <ng-container matColumnDef="mech">
                        <th *matHeaderCellDef> MECH </th>
                        <td mat-cell *matCellDef="let item"> {{item.dept.mech}} </td>
                        <td class="btm-row" mat-footer-cell *matFooterCellDef >{{totalOfferData.mech}}</td>
                    </ng-container>  

                    
                    <ng-container matColumnDef="total offers">
                        <th mat-header-cell *matHeaderCellDef> Total Offers </th>
                        <td mat-cell *matCellDef="let item"> {{item.total_offers}} </td>
                        <td class="btm-row" mat-footer-cell *matFooterCellDef >{{totalOfferData.total}}</td>
                    </ng-container>  

                    <ng-container matColumnDef="h1">
                        <th [attr.colspan] = "6" mat-header-cell *matHeaderCellDef ></th>
                    </ng-container>

                    <ng-container matColumnDef="header-row-second-group">
                        <th mat-header-cell [attr.colspan] = "8" *matHeaderCellDef > Department </th>
                    </ng-container>

                    <ng-container matColumnDef="h2">
                        <th mat-header-cell *matHeaderCellDef ></th>
                    </ng-container>
                    
                    <tr mat-header-row *matHeaderRowDef="['h1', 'header-row-second-group', 'h2']; sticky: true"></tr>

                    <tr mat-header-row  *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    <tr mat-footer-row *matFooterRowDef="['s.no', 'ai-ds', 'cse', 'ece', 'eee', 'bme', 'chem', 'civil', 'mech', 'total offers']"></tr>
                </table>
                  
                  <mat-paginator [pageSizeOptions]="pageSizeOptions" showFirstLastButtons></mat-paginator>
                  
            </div>
        </div>
        
    </div>

</div>
